# ccms-ssm-document-test.yaml
---
schemaVersion: "2.2"
description: Perform a healthcheck on the target instance
parameters:
  action:
    type: String
    allowedValues:
    - status
    - restart
    - start
    - stop
mainSteps:
  - name: ServiceStatus
    action: aws:runShellScript
    isEnd: true
    precondition:
      StringEquals:
        - "{{ action }}"
        - "status"
    inputs:
      runCommand:
        - "service chronyd status"
  - name: ServiceRestart
    action: aws:runShellScript
    isEnd: true
    precondition:
      StringEquals:
        - "{{ action }}"
        - "restart"
    inputs:
      runCommand:
        - "service chronyd restart"
  - name: ServiceStart
    action: aws:runShellScript
    isEnd: true
    precondition:
      StringEquals:
        - "{{ action }}"
        - "start"
    inputs:
      runCommand:
        - "service chronyd start"
  - name: ServiceStop
    action: aws:runShellScript
    isEnd: true
    precondition:
      StringEquals:
        - "{{ action }}"
        - "stop"
    inputs:
      runCommand:
        - "service chronyd stop"